/*!
Plugin:  jquery-parallax
Version  1.1
Author:  VÃ­ctor 'vxc' Ortega
URL: 	 http://www.vxc.es/
GitHub:  https://github.com/vxc-/jquery-parallax

2014, Licensed under the MIT and GPL licenses.
*/
;if(!jQuery){throw new Error("jquery-parallax Engine requires jQuery")}(function(a){var c=a(window);var d;var b={defaults:{},element:null,bgXunit:"px",bgXvalue:0,bgYunit:"px",bgYvalue:0,elementTop:0,proxyTransition:function(){},__init:function(f,e){var g=this;g.element=a(f);g.$id=g.element.attr("class");g.setConfig(e);g.bindHandlers();g.render()},setConfig:function(e){var f=this;f.defaults=a.extend({},a.fn.parallax.DEFAULTS,e);f.dispatchTransitionType();f.parseBGPosition();var g=f.defaults.transitionType;if((g=="vertical"&&f.bgYunit=="%")||(g=="horizontal"&&f.bgXunit=="%")){f.defaults.speed=f.defaults.speed/4}console.log("Speed after possible tunning: "+f.defaults.speed)},dispatchTransitionType:function(){var e=this;switch(e.defaults.transitionType){case"vertical":e.proxyTransition=a.proxy(e.renderVertical,e);break;case"horizontal":e.proxyTransition=a.proxy(e.renderHorizontal,e);break;case"diagonal":e.proxyTransition=a.proxy(e.renderDiagonal,e);break}},getHeight:function(){var e=this.element;var f=this.defaults;if(f.outerHeight){return e.outerHeight(true)}else{return e.height()}},parseBGPosition:function(){var g=this;var e=new RegExp(/[-+]?\d*\.?\d*/);var f=g.element.css("background-position").split(" ");g.bgXunit=f[0].replace(e,"");g.bgYunit=f[1].replace(e,"");g.bgXvalue=parseFloat(f[0].replace(g.bgXunit,""));g.bgYvalue=parseFloat(f[1].replace(g.bgYunit,""));if(g.bgXvalue==0){g.bgXunit="px"}if(g.bgYvalue==0){g.bgYunit="px"}},renderVertical:function(e){var f=this;f.element.css("background-position",f.bgXvalue+f.bgXunit+" "+(f.bgYvalue+Math.round((e-f.elementTop)*f.defaults.speed))+f.bgYunit)},renderHorizontal:function(e){var f=this;f.element.css("background-position",(f.bgXvalue+Math.round((e-f.elementTop)*f.defaults.speed))+f.bgXunit)+" "+f.bgYvalue+f.bgYunit},renderDiagonal:function(e){var g=this;var f=Math.round((e-g.elementTop)*g.defaults.speed);this.element.css("background-position",((g.bgXvalue+f)+g.bgXunit)+" "+((g.bgYvalue+f)+g.bgYunit))},render:function(){var g=this;var e=c.scrollTop();g.elementTop=g.element.offset().top;var f=g.getHeight();if(g.elementTop+f<e||g.elementTop>e+d){return}g.proxyTransition(e)},bindHandlers:function(){var e=this;a(window).bind("scroll",function(){e.render()}).resize(function(){e.render()})}};d=c.height();c.resize(function(){d=c.height()});if(typeof Object.create!=="function"){Object.create=function(f){function e(){}e.prototype=f;return new e()}}a.fn.parallax=function(e){return this.each(function(){var f=Object.create(b);f.__init(this,e)})};a.fn.parallax.DEFAULTS={speed:0.5,outerHeight:true,transitionType:"vertical"}})(jQuery);